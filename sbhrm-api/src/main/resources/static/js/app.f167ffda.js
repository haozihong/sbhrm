(function(e){function t(t){for(var n,s,i=t[0],l=t[1],u=t[2],c=0,m=[];c<i.length;c++)s=i[c],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==o[l]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={app:0},a=[];function s(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"7d83d53b"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=s(e);var u=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(c);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",u.name="ChunkLoadError",u.type=n,u.request=a,r[1](u)}o[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"3bb0":function(e,t,r){e.exports=r.p+"img/avatar-default.822fa077.png"},"409e":function(e,t,r){"use strict";r("6c9b")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("5319"),r("ac1f"),r("99af");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],s=(r("034f"),r("2877")),i={},l=Object(s["a"])(i,o,a,!1,null,null,null),u=l.exports,c=r("5c96"),d=r.n(c),m=(r("0fae"),r("e05f"),r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("el-container",[r("el-aside",{staticClass:"hidden-sm-and-down",attrs:{width:"200px"}},[e.$store.state.routes?r("el-menu",{staticStyle:{height:"100%"},attrs:{router:"","unique-opened":""}},e._l(e.$store.state.routes,(function(t,n){return r("el-submenu",{key:n,attrs:{index:""+(n+1)}},[r("template",{slot:"title"},[r("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._l(t.children,(function(t,n){return r("el-menu-item",{key:n,attrs:{index:t.frontendRoute}},[e._v(" "+e._s(t.name)+" ")])}))],2)})),1):e._e()],1),r("el-container",[r("el-header",{attrs:{id:"home-header"}},[r("router-link",{staticClass:"title",attrs:{to:"/",tag:"el-link"}},[e._v("Quick HR")]),r("span",[r("i",{staticClass:"hidden-md-and-up fas fa-bars fa-2x",staticStyle:{background:"rgba(0,0,0,0)",color:"#5e6e82",cursor:"pointer"},on:{click:function(t){e.showMenu=!0}}}),r("el-dropdown",{staticClass:"hidden-sm-and-down",attrs:{trigger:"click"},on:{command:e.handleCommand}},[r("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.$store.state.currentUser.name)+" "),r("i",[r("img",{staticClass:"user-avatar",attrs:{src:e.$store.state.currentUser.avatar,alt:""}})])]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"userinfo"}},[e._v("User Info")]),r("el-dropdown-item",{attrs:{command:"setting"}},[e._v("Setting")]),r("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("Sign out")])],1)],1)],1)],1),r("el-main",["/"!==this.$router.currentRoute.path?r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("Home")]),r("el-breadcrumb-item",[e._v(e._s(this.$router.currentRoute.name))])],1):e._e(),"/"===this.$router.currentRoute.path?r("div",{staticClass:"homeWelcome"},[e._v(" Welcome to Quick HR! ")]):e._e(),r("router-view",{staticClass:"homeRouterView"})],1)],1)],1),r("el-drawer",{attrs:{title:"Menu",visible:e.showMenu,"with-header":!1,size:"40%"},on:{"update:visible":function(t){e.showMenu=t}}},[e.$store.state.routes?r("el-menu",{staticStyle:{"margin-top":"10px"},attrs:{router:""}},[r("el-submenu",{staticClass:"user-profile-menu",attrs:{index:"0"}},[r("template",{slot:"title"},[r("img",{staticClass:"user-avatar",attrs:{src:e.$store.state.currentUser.avatar,alt:""}}),e._v(" "+e._s(e.$store.state.currentUser.name)+" ")]),r("el-menu-item",{attrs:{index:"userinfo"}},[e._v("User Info")]),r("el-menu-item",{attrs:{index:"setting"}},[e._v("Setting")]),r("el-menu-item",{attrs:{index:"logout"}},[e._v("Sign out")])],2),e._l(e.$store.state.routes,(function(t,n){return r("el-submenu",{key:n,attrs:{index:""+(n+1)}},[r("template",{slot:"title"},[e._v(e._s(t.name))]),e._l(t.children,(function(t,n){return r("el-menu-item",{key:n,attrs:{index:t.frontendRoute}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2):e._e()],1)],1)},f=[],g={name:"Home",data:function(){return{showMenu:!1}},mounted:function(){this.getMenuFromServer()},methods:{handleCommand:function(e){var t=this;"logout"===e?this.$confirm("Are you sure?","Signing out",{confirmButtonText:"Sign out",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.axios.get("/logout"),t.$store.commit("clearCurrentUser"),t.$router.replace("/login")})):"userinfo"===e&&this.$router.push("/userinfo")},getMenuFromServer:function(){var e=this;this.axios.get("/menu/menuTree").then((function(t){t&&e.$store.commit("setRoutes",t.children)}))}}},h=g,v=(r("cccb"),Object(s["a"])(h,p,f,!1,null,null,null)),b=v.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{attrs:{data:e.hrs}},[r("el-table-column",{attrs:{width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticClass:"avatar-img",attrs:{src:e.row.avatar,alt:e.row.name}})]}}])}),r("el-table-column",{attrs:{prop:"name",label:"Name",width:"120"}}),r("el-table-column",{attrs:{prop:"phone",label:"Phone",width:"140"}}),r("el-table-column",{attrs:{prop:"address",label:"Address"}}),r("el-table-column",{attrs:{label:"Operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("Delete")])]}}])})],1)],1)},_=[],y=(r("b0c0"),{name:"HrList",data:function(){return{hrs:[]}},mounted:function(){this.initAllHrs()},methods:{initAllHrs:function(){var e=this;this.axios.get("/admin/hr").then((function(t){t&&(e.hrs=t)}))},handleDelete:function(e){var t=this;this.$confirm("Deleting **"+e.name+"** permanently","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.axios.delete("/admin/hr/"+e.id).then((function(e){e&&t.initAllHrs()}))})).catch((function(){t.$message({type:"info",message:"Deleting cancelled"})}))}}}),F=y,x=(r("85b3"),Object(s["a"])(F,w,_,!1,null,"4cb0b758",null)),P=x.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"loginContainer",attrs:{rules:e.rules,"element-loading-text":"Logging in...",model:e.loginForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitLogin(t)}}},[r("h3",{staticClass:"loginTitle"},[e._v("Sign in to Quick HR")]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{size:"normal",type:"text","auto-complete":"off",placeholder:"Username"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{size:"normal",type:"password","auto-complete":"off",placeholder:"Password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-checkbox",{staticClass:"loginRemember",attrs:{size:"normal"},model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("Remember me")]),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{size:"normal",type:"primary"},on:{click:e.submitLogin}},[e._v("Sign in")])],1)],1)],1)},k=[],$=r("b383"),S=r.n($),C={name:"Login",data:function(){return{loading:!1,loginForm:{username:"",password:"",rememberMe:!0},rules:{username:[{required:!0,message:"Username",trigger:"blur"}],password:[{required:!0,message:"Password",trigger:"blur"}]}}},methods:{submitLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.axios.post("/login_process",S.a.stringify(e.loginForm)).then((function(t){if(e.loading=!1,t&&200===t.status){e.$store.commit("setCurrentUser",t.obj);var r=e.$route.query.redirect;e.$router.replace({path:"/login"===r||void 0===r?"/":r})}}))}))}}},O=C,j=(r("e395"),Object(s["a"])(O,U,k,!1,null,"0f53600d",null)),D=j.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hr?n("div",[n("el-col",{attrs:{sm:12,lg:8,xl:6}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[n("strong",[e._v(e._s(e.hr.name))])])]),n("div",[n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("el-button",{attrs:{type:"text"},on:{click:function(t){e.updateAvatarUrlDialogVisible=!0}}},[n("el-avatar",{attrs:{size:100,src:e.hr.avatar}},[n("img",{attrs:{src:r("3bb0")}})])],1)],1),n("table",{staticStyle:{"margin-bottom":"1rem"}},[n("tr",[n("td",[n("el-tag",[e._v("Phone")])],1),n("td",[e._v(e._s(e.hr.phone))])]),n("tr",[n("td",[n("el-tag",[e._v("Phone2")])],1),n("td",[e._v(e._s(e.hr.telephone))])]),n("tr",[n("td",[n("el-tag",[e._v("Address")])],1),n("td",[e._v(e._s(e.hr.address))])]),n("tr",[n("td",[n("el-tag",[e._v("Roles")])],1),n("td",[e._l(e.hr.roles,(function(t,r){return n("span",{key:r,staticStyle:{"margin-right":"0.3rem"}},[n("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.title))])],1)})),e.hr.roles?e._e():n("el-button",{attrs:{type:"text",disabled:""}},[e._v("No roles")])],2)])])]),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.updateInfoDialogVisible=!0}}},[e._v("Update info")]),n("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(t){e.pwdDialogVisible=!0}}},[e._v("Change password")])],1)])],1),n("el-dialog",{attrs:{title:"Update user info",visible:e.updateInfoDialogVisible,width:"30%"},on:{"update:visible":function(t){e.updateInfoDialogVisible=t}}},[e.infoForm?n("el-form",{ref:"infoForm",attrs:{model:e.infoForm,"status-icon":"","label-position":"right","label-width":"5rem"}},[n("el-form-item",{attrs:{label:"Name"}},[n("el-input",{model:{value:e.infoForm.name,callback:function(t){e.$set(e.infoForm,"name",t)},expression:"infoForm.name"}})],1),n("el-form-item",{attrs:{label:"Phone"}},[n("el-input",{attrs:{type:"tel"},model:{value:e.infoForm.phone,callback:function(t){e.$set(e.infoForm,"phone",t)},expression:"infoForm.phone"}})],1),n("el-form-item",{attrs:{label:"Phone2"}},[n("el-input",{attrs:{type:"tel"},model:{value:e.infoForm.telephone,callback:function(t){e.$set(e.infoForm,"telephone",t)},expression:"infoForm.telephone"}})],1),n("el-form-item",{attrs:{label:"Address"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.infoForm.address,callback:function(t){e.$set(e.infoForm,"address",t)},expression:"infoForm.address"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.updateUserInfo}},[e._v("Update Info")]),n("el-button",{on:{click:e.reloadUserInfoForm}},[e._v("Reload")])],1)],1):e._e()],1),n("el-dialog",{attrs:{title:"Change password",visible:e.pwdDialogVisible,width:"30%"},on:{"update:visible":function(t){e.pwdDialogVisible=t}}},[n("el-form",{ref:"updatePwdForm",attrs:{model:e.updatePwdForm,"status-icon":"",rules:e.rules,"label-position":"right","label-width":"9rem"}},[n("el-form-item",{attrs:{label:"Old password",prop:"oldPwd"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.updatePwdForm.oldPwd,callback:function(t){e.$set(e.updatePwdForm,"oldPwd",t)},expression:"updatePwdForm.oldPwd"}})],1),n("el-form-item",{attrs:{label:"New password",prop:"pwd"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.updatePwdForm.pwd,callback:function(t){e.$set(e.updatePwdForm,"pwd",t)},expression:"updatePwdForm.pwd"}})],1),n("el-form-item",{attrs:{label:"Confirm password",prop:"reenterPwd"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.updatePwdForm.reenterPwd,callback:function(t){e.$set(e.updatePwdForm,"reenterPwd",t)},expression:"updatePwdForm.reenterPwd"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.submitUpdatePwdForm()}}},[e._v("Update password")]),n("el-button",{on:{click:function(t){return e.resetForm("updatePwdForm")}}},[e._v("Reset")])],1)],1)],1),n("el-dialog",{attrs:{title:"Update avatar url",visible:e.updateAvatarUrlDialogVisible,width:"30%"},on:{"update:visible":function(t){e.updateAvatarUrlDialogVisible=t}}},[n("el-form",{ref:"avatarForm",attrs:{model:e.avatarForm,"label-position":"right","label-width":"5rem"}},[n("el-form-item",{attrs:{label:"Avatar url"}},[n("el-input",{attrs:{type:"url"},model:{value:e.avatarForm.avatar,callback:function(t){e.$set(e.avatarForm,"avatar",t)},expression:"avatarForm.avatar"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.updateAvatarUrl}},[e._v("Update Avatar")])],1)],1)],1)],1):e._e()},M=[],A={name:"UserInfo",data:function(){var e=this,t=function(t,r,n){r.length<3?n(new Error("Password too short")):(""!==e.updatePwdForm.reenterPwd&&e.$refs.updatePwdForm.validateField("reenterPwd"),n())},r=function(t,r,n){r.length<3?n(new Error("Password too short")):r!==e.updatePwdForm.pwd?n(new Error("Password confirmation doesn't match the password")):n()};return{updatePwdForm:{oldPwd:"",pwd:"",reenterPwd:""},rules:{pwd:[{validator:t,trigger:"blur"}],reenterPwd:[{validator:r,trigger:"blur"}]},infoForm:null,avatarForm:{avatar:""},updateInfoDialogVisible:!1,pwdDialogVisible:!1,updateAvatarUrlDialogVisible:!1}},computed:{hr:function(){return this.$store.state.currentUser}},mounted:function(){this.getUserFromServer()},methods:{onSuccess:function(){this.getUserFromServer()},getUserFromServer:function(){var e=this;this.axios.get("/user/info").then((function(t){t&&(e.$store.commit("setCurrentUser",t),e.reloadUserInfoForm())}))},reloadUserInfoForm:function(){this.infoForm=Object.assign({},this.$store.state.currentUser)},updateUserInfo:function(){var e=this;this.axios.put("/user/info",this.infoForm).then((function(t){t&&(e.updateInfoDialogVisible=!1,e.getUserFromServer())}))},submitUpdatePwdForm:function(){var e=this;this.$refs["updatePwdForm"].validate((function(t){if(!t)return!1;e.updatePwdForm.hrid=e.hr.id,e.axios.put("/user/pwd",S.a.stringify(e.updatePwdForm)).then((function(t){t&&(e.axios.get("/logout"),e.$store.commit("clearCurrentUser"),e.$router.replace("/login"))}))}))},updateAvatarUrl:function(){var e=this;this.axios.post("/user/avatarUrl",S.a.stringify(this.avatarForm)).then((function(t){t&&(e.updateAvatarUrlDialogVisible=!1,e.getUserFromServer())}))},resetForm:function(e){this.$refs[e].resetFields()}}},R=A,V=(r("409e"),Object(s["a"])(R,I,M,!1,null,"e2682504",null)),E=V.exports;n["default"].use(m["a"]);var T=[{path:"/login",name:"Login",component:D,hidden:!0},{path:"/",name:"Home",component:b,children:[{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}},{path:"/hr/list",name:"All HR",component:P},{path:"/userinfo",name:"UserInfo",component:E,hidden:!0}]}],H=new m["a"]({mode:"history",base:"/",routes:T}),z=H,L=r("bc3a"),N=r.n(L),q=r("2106"),B=r.n(q),J=r("2f62");n["default"].config.productionTip=!1,n["default"].use(d.a),n["default"].use(B.a,N.a),n["default"].use(J["a"]);var Q=new J["a"].Store({state:{currentUser:{name:"",avatar:""},routes:[]},mutations:{setCurrentUser:function(e,t){e.currentUser=t,localStorage.setItem("user",JSON.stringify(t))},clearCurrentUser:function(e){e.currentUser={name:"",avatar:""},localStorage.removeItem("user")},setRoutes:function(e,t){e.routes=t}}});z.beforeEach((function(e,t,r){"/login"===e.path||localStorage.getItem("user")?r():r("/login?redirect="+e.path)})),N.a.interceptors.response.use((function(e){return e.status&&200===e.status&&500===e.data.status?d.a.Message.error({message:e.data.msg}):e.data.msg&&d.a.Message.success({message:e.data.msg}),e.data}),(function(e){401===e.response.status||403===e.response.status?(d.a.Message.error({message:e.response.data.msg?e.response.data.msg:"Please log in."}),Q.commit("clearCurrentUser"),z.replace("/login")):e.response.data.msg?d.a.Message.error({message:e.response.data.msg}):d.a.Message.error({message:"".concat(e.response.status,": ").concat(e.response.statusText)})})),new n["default"]({router:z,store:Q,mounted:function(){if(localStorage.getItem("user"))try{Q.commit("setCurrentUser",JSON.parse(localStorage.getItem("user")))}catch(e){Q.commit("clearCurrentUser")}},render:function(e){return e(u)}}).$mount("#app")},"5ced":function(e,t,r){},"6c9b":function(e,t,r){},"82dd":function(e,t,r){},"85b3":function(e,t,r){"use strict";r("82dd")},"85ec":function(e,t,r){},cccb:function(e,t,r){"use strict";r("5ced")},cd88:function(e,t,r){},e395:function(e,t,r){"use strict";r("cd88")}});
//# sourceMappingURL=app.f167ffda.js.map